---
const { title = 'Home', description = 'Personal site & blog' } = Astro.props;
const here = Astro.url.pathname;
---
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{title} | ae ged</title>
    <meta name="description" content={description} />
    <meta property="og:type" content="website" />
    <meta property="og:title" content={`${title} | ae ged`} />
    <meta property="og:description" content={description} />
    <meta property="og:url" content={Astro.url.origin + Astro.url.pathname} />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content={`${title} | ae ged`} />
    <meta name="twitter:description" content={description} />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Nunito:ital,wght@0,200..1000;1,200..1000&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Courier+Prime:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">
    <style is:global>
      :root {
        --bg: #ffffff;
        --fg: #0b0c0e;
        --muted: #6b7280;
        --link: #374151; /* align with global link color */
        --accent: #111827;
        --border: #e5e7eb;
        --card: #f8fafc;
        --radius: 18px;
      }
      html, body { height: 100%; }
      body {
        margin: 0; background: var(--bg); color: var(--fg);
        font-family: Nunito, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", sans-serif;
        -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;
      }
      .wrap { max-width: 880px; margin: 0 auto; padding: 48px 24px 64px; }
      header { display: grid; grid-template-columns: 1fr auto; align-items: center; }
      .brand { font-size: 32pt; font-weight: 800; letter-spacing: +0.05em}
      nav a { color: var(--link); text-decoration: none; margin-left: 24px; font-weight: 600; opacity: .9; }
      .title { font-size: clamp(44px, 7vw, 64px); line-height: 1.02; margin: 48px 0 18px; font-weight: 800; letter-spacing: -0.02em; }
      .lede { color: var(--muted); font-size: 16px; line-height: 1.6; max-width: 58ch; }
      .muted { color: var(--muted); }
      .date { margin-top: 8px; color: var(--muted); font-size: 14px; }
      .post-list { display: grid; gap: 44px; margin-top: 36px; }
      .post h2 { font-size: clamp(26px, 4vw, 32px); margin: 0 0 10px; letter-spacing: -0.01em; }
      .post p { color: var(--muted); margin: 6px 0 0; font-size: 18px; line-height: 1.7; }
      .card { background: var(--card); border: 1px solid var(--border); border-radius: var(--radius); padding: 20px 22px; margin-top: 22px; overflow: auto; font-family: Courier+Prime, ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; color: #111827; line-height: 1.3; white-space: pre; white-space: pre-wrap; }
      footer { margin-top: 80px; display:flex; justify-content: space-between; align-items:center; gap: 12px; color: var(--muted); font-size: 14px; border-top: 1px solid var(--border); padding-top: 24px; }
      footer a { color: var(--muted); text-decoration: none; }
      footer a:hover { text-decoration: underline; }
      article { max-width: 70ch; }
      article h1 { font-size: clamp(34px, 5vw, 44px); margin: 6px 0 12px; }
      article .meta { color: var(--muted); margin-bottom: 24px; }
      article p { font-size: 18px; line-height: 1.8; color: #111827; }
      pre, code { font-family: Courier+Prime, ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; }
      pre { background: var(--card); border: 1px solid var(--border); border-radius: 12px; padding: 16px; overflow:auto; }
      img { max-width: 100%; height: auto; border-radius: 12px; }
      @media (max-width: 640px){ nav a{ margin-left: 14px; } .lede{ font-size: 18px; } }
    </style>
    <style is:global>
      /* TASK A — Global link style (appended) */
      :root{
        --text: #111827;    /* body text (gray-900) */
        --link: #374151;    /* links (gray-700), slightly lighter than body */
        --muted: #6b7280;   /* secondary text (gray-500) */
        --muted-2: #9ca3af; /* tertiary text (gray-400) */
      }

      html, body { color: var(--text); }

      a, a:visited{
        color: var(--link);
        text-decoration: none;
        background-image: linear-gradient(currentColor, currentColor);
        background-position: 0 100%;
        background-repeat: no-repeat;
        background-size: 0% 1px;              /* hidden underline */
        transition: background-size .18s ease; /* smooth reveal */
      }

      a:hover{
        background-size: 100% 1px;            /* animate underline in */
      }

      /* keyboard focus still visible */
      a:focus-visible{
        outline: 2px solid var(--muted-2);
        outline-offset: 2px;
      }

      /* respect reduced motion */
      @media (prefers-reduced-motion: reduce){
        a{ transition: none; }
      }

      /* TASK B — Blog index layout */
      .page-title{
        font-size: clamp(28px, 4vw, 40px);
        font-weight: 800;
        margin: 0 0 2rem;
      }

      .post-list{ display: grid; gap: 2rem; }

      .post .post-title{
        font-weight: 700;
        font-size: clamp(18px, 2.4vw, 22px);
        margin: 0 0 .25rem;
      }

      .post .post-excerpt{
        color: var(--muted);    /* light grey preview line */
        margin: 0;
      }

      .post .post-meta{
        color: var(--muted-2);  /* lighter grey for the date */
        font-size: .875rem;
        margin-top: .5rem;
      }

      /* Blog index titles: black text, no underline */
      .post .post-title a,
      .post .post-title a:visited,
      .post .post-title a:hover,
      .post .post-title a:focus{
        color: var(--text);
        background-image: none;
      }

      /* TASK C — Navigation: grey out current page */
      .site-nav a[aria-current="page"]{
        color: var(--muted);
        pointer-events: none;                /* not clickable */
        cursor: default;
        background-size: 0 1px !important;   /* disable hover underline */
        outline: none;                       /* no focus ring on disabled item */
      }

      /* Blog article code blocks — match .card styling */
      /* Shiki renders <pre class="astro-code ...">; normalize all pre blocks */
      article pre,
      article pre.astro-code,
      article :where(pre.astro-code){
        background: var(--card) !important;
        border: 1px solid var(--border) !important;
        border-radius: var(--radius) !important;
        padding: 20px 22px !important;
        margin: 22px 0 !important;
        overflow: auto !important;
        font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace !important;
        color: #111827 !important;
        font-size: 14px !important;
        line-height: 1.3 !important;
      }
      article pre code,
      article pre.astro-code code{
        background: transparent !important; /* avoid nested background from highlighter */
        padding: 0 !important;
      }
    </style>
  </head>
  <body>
    <div class="wrap">
      <header>
        <div class="brand">Alex Gednov</div>
        <nav class="site-nav">
          <a href="/about" aria-current={(here === '/' || here.startsWith('/about')) ? 'page' : undefined}>About</a>
          <a href="/blog" aria-current={here.startsWith('/blog') ? 'page' : undefined}>Blog</a>
        </nav>
      </header>
      <main>
        <slot />
      </main>
      <footer>
        <div>{new Date().getFullYear()} © Alex Gednov.</div>
        <a href="/rss.xml">RSS</a>
      </footer>
    </div>
  </body>
</html>
